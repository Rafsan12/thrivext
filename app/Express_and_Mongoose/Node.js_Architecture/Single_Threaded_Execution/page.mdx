# ЁЯФБ Single Threaded Execution (Node.js ржП ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ):

1. ржкрзНрж░ржержорзЗ ржХрзЛржб initialize рж╣рзЯред
2. Top-level ржХрзЛржб (main function-ржПрж░ ржмрж╛ржЗрж░рзЗрж░ ржХрзЛржб) execute рж╣рзЯред
3. External module ржЧрзБрж▓рзЛ import ржХрж░рж╛ рж╣рзЯред
4. Callback ржмрж╛ Event ржЧрзБрж▓рзЛ **register** ржХрж░рж╛ рж╣рзЯ, ржХрж┐ржирзНрждрзБ рждржЦржиржЗ execute рж╣рзЯ ржирж╛ред
5. ржПрж░ржкрж░ **Event Loop** рж╢рзБрж░рзБ рж╣рзЯ, ржпрж╛ registered callback ржЧрзБрж▓рзЛ ржкрж░рзНржпрж╛рзЯржХрзНрж░ржорзЗ execute ржХрж░рзЗред

![screencapture-web-programming-hero-level2-batch-5-video-level2-batch-5-12-4-high-level-overview-of-node-js-architecture-2025-06-14-12_22_42.png](../images/screencapture-web-programming-hero-level2-batch-5-video-level2-batch-5-12-4-high-level-overview-of-node-js-architecture-2025-06-14-12_22_42.png)

---

### тЪЩя╕П ржХрж┐ржирзНрждрзБ ржпржжрж┐ ржХрзЛржи Callback ржнрж╛рж░рзА ржХрж╛ржЬ рж╣рзЯ?

- ржпрзЗржоржи: File read, Crypto calculation, Image processing...
- рждржЦржи Node.js рж╕рзЗржЗ ржнрж╛рж░рзА ржХрж╛ржЬржЧрзБрж▓рзЛржХрзЗ **Thread Pool** ржП ржкрж╛ржарж┐рзЯрзЗ ржжрзЗрзЯред
- ржПржЗ Thread Pool рж╣рж▓рзЛ ржПржХржЧрзБржЪрзНржЫ Worker Thread ржпрзЗржЧрзБрж▓рзЛ ржУржЗ ржнрж╛рж░рзА Task ржЧрзБрж▓рзЛ handle ржХрж░рзЗред
- ржХрж╛ржЬ рж╢рзЗрж╖ рж╣рж▓рзЗ рждрж╛рж░рж╛ Event Loop ржХрзЗ ржЬрж╛ржирж╛рзЯ, рждрж╛рж░ржкрж░ Event Loop Output ржжрзЗржЦрж╛рзЯред

![screencapture-web-programming-hero-level2-batch-5-video-level2-batch-5-12-4-high-level-overview-of-node-js-architecture-2025-06-14-12_20_46 (1).png](../images/screencapture-web-programming-hero-level2-batch-5-video-level2-batch-5-12-4-high-level-overview-of-node-js-architecture-2025-06-14-12_20_46_(1).png)

---

### ЁЯОп рж╕рж╛рж░рж╛ржВрж╢:

- Process-ржПрж░ ржнрж┐рждрж░рзЗ ржЫрзЛржЯ execution units рж╣рж▓рзЛ тЖТ **Threads**
- **Node.js** ржП main thread ржПржХржЯрж╛ржЗ тЖТ **Single Thread**
- ржнрж╛рж░рзА ржХрж╛ржЬржЧрзБрж▓рзЛ ржЬржирзНржп ржерж╛ржХрзЗ **Thread Pool**
- рж╕ржм ржХрж┐ржЫрзБрж░ рж╕ржоржирзНржмрзЯ ржХрж░рзЗ **Event Loop** тЖТ рждрж╛ржЗ ржПржХрзЗ ржмрж▓рзЗ **Event Driven Architecture**
- Node.js ржПржХржХ Thread-ржП ржЪрж▓рзЗ тЖТ Single-threadedред
- ржХрж┐ржирзНрждрзБ Node.js **libuv** ржПрж░ ржорж╛ржзрзНржпржорзЗ **Thread Pool** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред

### ЁЯФз Internal Thread Pool:

Node.js asynchronous ржХрж╛ржЬ (ржпрзЗржоржи file system, DNS lookup ржЗрждрзНржпрж╛ржжрж┐) ржкрж░рж┐ржЪрж╛рж▓ржирж╛рж░ ржЬржирзНржп background ржП thread pool ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред

```jsx
// File read with thread pool
const fs = require('fs');
fs.readFile('data.txt', (err, data) => {
  console.log("File read done");
});
```

ЁЯСЙ File read рж╣рж▓рзЗ libuv Thread Pool-ржП ржЪрж▓рзЗ ржпрж╛ржпрж╝, ржЖрж░ callback ржкрж░рзЗ Event Loop ржП ржлрж┐рж░рзЗ ржЖрж╕рзЗред

### ЁЯЪи Single Threaded Architecture ржПрж░ Downside

ржзрж░рзЛ, ржЖржорж╛ржжрзЗрж░ ржПржХржЯрж┐ Node.js рж╕рж╛рж░рзНржнрж╛рж░ ржЖржЫрзЗ тАФ ржпрзЗржЯрж┐ single-threadedред

ржПржЦржи ржПржХрзЗ ржПржХрзЗ рзк ржЬржи ржЗржЙржЬрж╛рж░ ржирж┐ржЪрзЗрж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯржЧрзБрж▓рзЛ ржкрж╛ржарж╛ржЪрзНржЫрзЗ:

1. ЁЯзСтАНЁЯТ╗ **User 1**: ржбрзЗржЯрж╛ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржХрж░ржЫрзЗ (рж╕рж╣ржЬ ржХрж╛ржЬ)
2. ЁЯзСтАНЁЯТ╗ **User 2**: ржПржХржЯрж┐ ржмрзЬ ржлрж╛ржЗрж▓ **synchronously** ржкрзЬрждрзЗ ржЪрж╛ржЪрзНржЫрзЗ (ржнрж╛рж░рж┐ ржХрж╛ржЬ)
3. ЁЯзСтАНЁЯТ╗ **User 3**: Database query ржХрж░ржЫрзЗ
4. ЁЯзСтАНЁЯТ╗ **User 4**: ржЖрж░ржУ ржПржХржЯрж┐ ржбрзЗржЯрж╛ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржХрж░ржЫрзЗ

![screencapture-web-programming-hero-level2-batch-5-video-level2-batch-5-12-4-high-level-overview-of-node-js-architecture-2025-06-14-12_49_29.png](../images/screencapture-web-programming-hero-level2-batch-5-video-level2-batch-5-12-4-high-level-overview-of-node-js-architecture-2025-06-14-12_49_29.png)

---

### тЪЩя╕П ржПржЦржи ржХрзА ржШржЯржмрзЗ?

- **User 1** ржПрж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржЦрзБржм рж╕рж╣ржЬ, рж╕рзЗржХрзНрж╖рзЗрждрзНрж░рзЗ Node.js ржПржХрзЗ рж╕рж╣ржЬрзЗржЗ serve ржХрж░рзЗ ржжрж┐ржмрзЗред

- рждрж╛рж░ржкрж░ **User 2** ржПржХржЯрж┐ **synchronous file read** ржХрж░рждрзЗ ржЪрж╛ржЪрзНржЫрзЗред

> тЬЕ ржХрж┐ржирзНрждрзБ рж╕ржорж╕рзНржпрж╛ ржПржЦрж╛ржирзЗ! Synchronous ржорж╛ржирзЗржЗ ржПржХ ржХрж╛ржЬ рж╢рзЗрж╖ ржирж╛ рж╣рж▓рзЗ ржкрж░рзЗрж░ ржХрж╛ржЬ рж╢рзБрж░рзБ рж╣ржмрзЗ ржирж╛ред
> 

ржПржЦржи, ржпрзЗрж╣рзЗрждрзБ **file read** ржПржХржЯрж╛ **heavy task**, ржПржмржВ рж╕рзЗржЯрж╛ **synchronously** рж╣ржЪрзНржЫрзЗ, рждрж╛ржЗ:

- ржкрзБрж░рзЛ thread ржР ржХрж╛ржЬрзЗржЗ ржЖржЯржХрзЗ ржерж╛ржХржмрзЗред
- **User 3** ржУ **User 4**ржПрж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ **ржмрзНрж▓ржХ** рж╣рзЯрзЗ ржпрж╛ржмрзЗред
- ржлрж╛ржЗрж▓ ржпржд ржмрзЬ, ржЕржкрзЗржХрзНрж╖рж╛рж░ рж╕ржорзЯ рждржд ржмрзЗрж╢рж┐ред

ржПржЯрж╛ржЗ рж╣ржЪрзНржЫрзЗ **Single Threaded Architecture**-ржПрж░ ржмрзЬ ржПржХржЯрж╛ **disadvantage**ред

![screencapture-web-programming-hero-level2-batch-5-video-level2-batch-5-12-4-high-level-overview-of-node-js-architecture-2025-06-14-12_55_20 (2).png](../images/screencapture-web-programming-hero-level2-batch-5-video-level2-batch-5-12-4-high-level-overview-of-node-js-architecture-2025-06-14-12_55_20_(2).png)

---

### ЁЯЫая╕П рж╕ржорж╛ржзрж╛ржи ржХрзА?

ржПржЗ рж╕ржорж╕рзНржпрж╛рж░ рж╕ржорж╛ржзрж╛ржи ржжрзЗрзЯ **Thread Pool + Asynchronous Programming**ред

### ржпржжрж┐ **User 2** ржлрж╛ржЗрж▓ржЯрж╛ **asynchronously** ржкрзЬрждрзЛ рждрж╛рж╣рж▓рзЗ:

1. Node.js рж╕рзЗржЗ ржнрж╛рж░рзА ржХрж╛ржЬржЯрж╛ **Thread Pool**ржП ржкрж╛ржарж┐рзЯрзЗ ржжрж┐рждрзЛред
2. Thread Pool ржмрзНржпрж╛ржХржЧрзНрж░рж╛ржЙржирзНржбрзЗ ржХрж╛ржЬ ржХрж░рждрзЛред
3. **Event Loop** meanwhile ржЕржирзНржп ржЗржЙржЬрж╛рж░ (**User 3 & 4**) ржПрж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржкрзНрж░рж╕рзЗрж╕ ржХрж░рждрзЛред
4. ржХрж╛ржЬ рж╢рзЗрж╖ рж╣рж▓рзЗ Thread Pool Event Loop ржХрзЗ ржЬрж╛ржирж╛рждрзЛред
5. рждрж╛рж░ржкрж░ Event Loop **User 2**ржХрзЗ рждрж╛рж░ ржлрж╛ржЗрж▓ рж░рзЗрж╕ржкржирзНрж╕ ржкрж╛ржарж┐рзЯрзЗ ржжрж┐рждрзЛред

![screencapture-web-programming-hero-level2-batch-5-video-level2-batch-5-12-4-high-level-overview-of-node-js-architecture-2025-06-14-13_16_59 (1).png](../images/screencapture-web-programming-hero-level2-batch-5-video-level2-batch-5-12-4-high-level-overview-of-node-js-architecture-2025-06-14-13_16_59_(1).png)

---

### ЁЯФБ Event Driven Architecture ржПрж░ рж╕рзМржирзНржжрж░рзНржп

ЁЯСЙ Node.js ржПржХржЯрж╛ржЗ ржерзНрж░рзЗржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржУ тАФ

**Asynchronous ы░йьЛЭрзЗрж░ ржорж╛ржзрзНржпржорзЗ ржнрж╛рж░рзА Task ржЧрзБрж▓рзЛржХрзЗ smartly handle ржХрж░рзЗред**

- ржХрзЗржЙ **Synchronous** request ржкрж╛ржарж╛рж▓рзЗ ржкрзБрж░рзЛ рж╕рж╛рж░рзНржнрж╛рж░ ржЖржЯржХрзЗ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред ржХрж┐ржирзНрждрзБ **Asynchronous** рж╣рж▓рзЗ, ржХрж╛ржЬ ржЧрзБрж▓рзЛ back-end ржП ржнрж╛ржЧ ржХрж░рзЗ ржжрзЗржУрзЯрж╛ рж╣рзЯред
- ржПрждрзЗ ржХрж░рзЗ ржХрзЗржЙ ржмрзНрж▓ржХ рж╣рзЯ ржирж╛, ржПржмржВ рж╕рж╛рж░рзНржнрж╛рж░ ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ржУ ржХржорзЗ ржирж╛ред

---

### тЬЕ рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржкрзЗ:

- Synchronous ржнрж╛рж░рзА ржХрж╛ржЬржЧрзБрж▓рзЛ Single Thread ржмрзНрж▓ржХ ржХрж░рзЗред
- Asynchronous + Thread Pool ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ рж╕рзЗржЗ рж╕ржорж╕рзНржпрж╛ рж╕ржорж╛ржзрж╛ржи ржХрж░рж╛ ржпрж╛рзЯред
- ржПржЯрж╛ржЗ Node.js-ржПрж░ **Event Driven, Non-blocking Architecture**ред

---

## тЬЕ ржЙржкрж╕ржВрж╣рж╛рж░:

| ржмрж┐рж╖рзЯ | ржмрзНржпрж╛ржЦрзНржпрж╛ |
| --- | --- |
| Node.js Architecture | Event-driven, Non-blocking |
| Event Loop | Stack ржЦрж╛рж▓рж┐ ржерж╛ржХрж▓рзЗ Callback Queue ржерзЗржХрзЗ ржлрж╛ржВрж╢ржи ржирзЗрзЯ |
| Process | ржкрзБрж░рзЛ Node.js ржЕрзНржпрж╛ржкрзЗрж░ runtime |
| Thread | Process ржПрж░ ржоржзрзНржпрзЗ execution units; Node.js ржмрзНржпрж╛ржХржЧрзНрж░рж╛ржЙржирзНржбрзЗ multiple thread ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ |