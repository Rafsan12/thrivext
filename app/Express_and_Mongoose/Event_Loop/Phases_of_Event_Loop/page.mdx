import { Steps } from 'nextra/components'


# Phases of Event Loop
## ЁЯФД **Event Loop ржПрж░ ржлрзЗржЗржЬрж╕ржорзВрж╣ (Phases of Event Loop)**

Node.js ржПрж░ Event Loop ржорзВрж▓ржд рзмржЯрж┐ ржзрж╛ржкрзЗ ржХрж╛ржЬ ржХрж░рзЗред ржкрзНрж░рждрж┐ржЯрж┐ ржзрж╛ржк ржмрж╛ **phase** ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржзрж░ржгрзЗрж░ callback ржмрж╛ ржХрж╛ржЬ ржкрзНрж░рж╕рзЗрж╕ ржХрж░рзЗред

---
<Steps>

###  **Timers Phase (ржЯрж╛ржЗржорж╛рж░ ржлрзЗржЗржЬ)**

ЁЯСЙ `setTimeout()` ржПржмржВ `setInterval()` ржПрж░ ржЬржирзНржп ржирж┐рж░рзНржзрж╛рж░рж┐ржд рж╕ржорзЯрзЗрж░ ржкрж░рзЗ ржпрзЗрж╕ржм callback ржЪрж▓рзЗ, рж╕рзЗржЧрзБрж▓рзЛ ржПржЦрж╛ржирзЗ ржПржХрзНрж╕рж┐ржХрж┐ржЙржЯ рж╣рзЯред
    
    ```jsx
    setTimeout(() => {
      console.log("Timer callback");
    }, 1000);
    ```
    

---

### **Pending Callbacks Phase**

ЁЯСЙ ржХрж┐ржЫрзБ ржЕржкрж╛рж░рзЗрж╢ржи ржпрзЗржоржи TCP errors, ржпрзЗржЦрж╛ржирзЗ callback ржжрзЗрж░рж┐ ржХрж░рзЗ ржЖрж╕рзЗ, рждрж╛ ржПржЦрж╛ржирзЗ ржПржХрзНрж╕рж┐ржХрж┐ржЙржЯ рж╣рзЯред

- ржПржЯрж┐ ржЦрзБржм ржмрзЗрж╢рж┐ ржмрзНржпржмрж╣рзГржд ржирзЯ, ржХрж┐ржирзНрждрзБ OS ржирж┐рж░рзНржнрж░ callback-ржЧрзБрж▓рзЛ ржПржЦрж╛ржирзЗ ржЖрж╕рждрзЗ ржкрж╛рж░рзЗред

---

### рзй. **Idle, Prepare Phase** *(Internal use)*

ЁЯСЙ ржПржЯрж┐ Node.js ржПрж░ ржЕржнрзНржпржирзНрждрж░рзАржг ржХрж╛ржЬрзЗрж░ ржЬржирзНржп, рж╕рж╛ржзрж╛рж░ржгржд JavaScript ржбрзЗржнрзЗрж▓ржкрж╛рж░ржжрзЗрж░ ржЬрж╛ржирж╛рж░ ржкрзНрж░ржпрж╝рзЛржЬржи рж╣ржпрж╝ ржирж╛ред

---

### **Poll Phase**

ЁЯСЙ ржорзВрж▓ ржХрж╛ржЬрзЗрж░ ржлрзЗржЗржЬред ржПржЦрж╛ржирзЗ ржЗржнрзЗржирзНржЯ рж▓рзБржк I/O (file, network) ржПрж░ ржЬржирзНржп ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзЗред

- ржирждрзБржи ржЗржнрзЗржирзНржЯ ржерж╛ржХрж▓рзЗ тЖТ callback execute ржХрж░рзЗ
- ржЗржнрзЗржирзНржЯ ржирж╛ ржерж╛ржХрж▓рзЗ тЖТ check ржХрж░рзЗ callback queue ржлрж╛ржБржХрж╛ ржХрж┐ ржирж╛
    - ржпржжрж┐ ржлрж╛ржБржХрж╛ рж╣рзЯ тЖТ event loop wait ржХрж░рзЗ
    - ржпржжрж┐ ржЯрж╛ржЗржорж╛рж░ ржмрж╛ рж╕рзЗржЯ ржЗржорж┐ржбрж┐рзЯрзЗржЯ ржерж╛ржХрзЗ тЖТ ржкрж░рзЗрж░ ржлрзЗржЗржЬрзЗ ржЪрж▓рзЗ ржпрж╛рзЯ

---

### **Check Phase**

ЁЯСЙ `setImmediate()` ржлрж╛ржВрж╢ржирзЗрж░ callback ржЧрзБрж▓рзЛ ржПржЦрж╛ржирзЗ ржПржХрзНрж╕рж┐ржХрж┐ржЙржЯ рж╣рзЯред
    
    ```jsx
    setImmediate(() => {
      console.log("SetImmediate callback");
    });
    ```
    

---

### **Close Callbacks Phase**

ЁЯСЙ ржпржЦржи ржХрзЛржирзЛ socket ржмрж╛ resource ржмржирзНржз рж╣рзЯ (ржпрзЗржоржи: `socket.destroy()`), рждрж╛рж░ callback ржЧрзБрж▓рзЛ ржПржЦрж╛ржирзЗ ржЪрж▓рзЗред

---
</Steps>

## ЁЯза Extra: Microtasks Queue (Promises, `process.nextTick()`)

- **Microtask queue** ржЗржнрзЗржирзНржЯ рж▓рзБржкрзЗрж░ ржлрзЗржЗржЬрзЗрж░ ржЖржЧрзЗ ржмрж╛ ржкрж░рзЗ ржЪрж▓рзЗред
- ржпрзЗржоржи:
    - `Promise.then()`
    - `process.nextTick()` тЖР Highest priority

---

## ЁЯУК Event Loop Phase (Simplified Flow)

```

тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ  timers       тФВ тЖР setTimeout, setInterval
тФЬтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФд
тФВ  pending      тФВ тЖР OS-level callbacks
тФЬтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФд
тФВ  idle, prepareтФВ тЖР internal use
тФЬтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФд
тФВ  poll         тФВ тЖР I/O events (file, DB)
тФЬтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФд
тФВ  check        тФВ тЖР setImmediate
тФЬтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФд
тФВ  close        тФВ тЖР socket.close
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
```

ЁЯСЙ ржкрзНрж░рждрж┐ржЯрж┐ ржлрзЗржЗржЬрзЗрж░ ржорж╛ржЭрзЗ **Microtask Queue** (Promise, nextTick) ржЪрзЗржХ рж╣рзЯред

---

### тЬЕ ржЙржкрж╕ржВрж╣рж╛рж░:

- Event Loop ржзрж╛ржкрзЗ ржзрж╛ржкрзЗ callback ржЧрзБрж▓рзЛржХрзЗ ржкрж░рж┐ржЪрж╛рж▓ржирж╛ ржХрж░рзЗред
- I/O non-blocking рж░рж╛ржЦрждрзЗ ржПржЯрж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржгред
- Microtask ржЧрзБрж▓рзЛ ржмрзЗрж╢рж┐ ржкрзНрж░рж╛ржзрж╛ржирзНржп ржкрж╛рзЯред
- ржПрж░ ржорж╛ржзрзНржпржорзЗ Node.js ржПржХржЯрж┐ efficient, responsive рж╕рж╛рж░рзНржнрж╛рж░ рж╣рждрзЗ ржкрж╛рж░рзЗтАФeven with single thread.